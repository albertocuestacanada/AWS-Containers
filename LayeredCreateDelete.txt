# Commands to layer all stacks

PATH=$PATH:/home/alberto/AWS/Git/AWS-Tooling/

./CreateNetworkAndSecurity.sh &&
waitForStatus.py -s NetworkAndSecurityDocker -r CREATE_COMPLETE &&
./CreateECR.sh &&
waitForStatus.py -s ECRDocker -r CREATE_COMPLETE &&
./CreateDockerServer.sh  &&
waitForStatus.py -s DockerServerDocker -r CREATE_COMPLETE

# Commands to delete all stacks and docker images

aws cloudformation delete-stack --stack-name ECSClusterDocker &&
waitForDeletion.py -s ECSClusterDocker &&

aws cloudformation delete-stack --stack-name DockerServerDocker &&
waitForDeletion.py -s DockerServerDocker &&
aws ecr delete-repository --repository-name ecs-course --force &&
aws cloudformation delete-stack --stack-name ECRDocker &&
waitForDeletion.py -s ECRDocker &&
aws cloudformation delete-stack --stack-name NetworkAndSecurityDocker &&
waitForDeletion.py -s NetworkAndSecurityDocker
